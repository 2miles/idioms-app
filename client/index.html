<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using Vite + React" />

    <script>
      (function () {
        // Single source of truth for applying the theme
        window.__applyTheme = function (effective /* 'light' | 'dark' */) {
          const root = document.documentElement;
          root.classList.remove('theme-light', 'theme-dark');
          root.classList.add(`theme-${effective}`);
          root.style.colorScheme = effective;
          localStorage.setItem('theme', effective); // store applied for first paint next load
        };

        // Resolve effective theme from saved choice (or system)
        const choice = localStorage.getItem('theme-choice'); // 'light' | 'dark' | 'system' | null
        const effective =
          choice === 'light'
            ? 'light'
            : choice === 'dark'
            ? 'dark'
            : matchMedia('(prefers-color-scheme: dark)').matches
            ? 'dark'
            : 'light';

        // Apply immediately (prevents flash)
        window.__applyTheme(effective);

        // Optional: keep in sync across tabs if theme-choice changes elsewhere
        window.addEventListener('storage', (e) => {
          if (e.key === 'theme-choice') {
            const t = e.newValue;
            const eff =
              t === 'light'
                ? 'light'
                : t === 'dark'
                ? 'dark'
                : matchMedia('(prefers-color-scheme: dark)').matches
                ? 'dark'
                : 'light';
            window.__applyTheme(eff);
          }
        });
      })();
    </script>

    <link rel="icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="manifest" href="/manifest.json" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <title>Vite + React + TS</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
